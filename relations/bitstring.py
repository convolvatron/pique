import bitstring

def Bitstring(Relation):
    arguments = ['value', 0]
    def __init__(bits):
        self.contents = BitArray()
        for i in bits:
            self.contents.set(True, i)
        return super(fixed_handlers(({0, 1}, check),
                                    ({},     iterate)))
        
    def insert(self, pair):
        if pair[1] != 1:
            panic("set bitfield")
        self.contents.overwrite(1, pair[0])

        
    fixed_handlers(({'map'}, map_iterate),
                   ({'map', 'key'}, map_lookup),
                   ({'map', 'key', 'value'}, map_check)),
    

    def check():
        pass

    def iterate():
        pass

# not clear if these two ever get integrated, we need relation to be
# be unbound..i guess somewhere
# aggies dont have sigs
def BuildBitstring(Aggregate):
    # next?
    def __init__():
        self.body = bitstring.BitArray()

    def each():
        pass
        
    def flush():
        pass
        
